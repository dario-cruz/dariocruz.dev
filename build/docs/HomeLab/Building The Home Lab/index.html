<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-HomeLab/Building The Home Lab" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Building The Home Lab | DarioCruz.dev</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://www.dariocruz.dev/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://www.dariocruz.dev/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://www.dariocruz.dev/docs/HomeLab/Building The Home Lab"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Building The Home Lab | DarioCruz.dev"><meta data-rh="true" name="description" content="Building a Cyber Home Lab"><meta data-rh="true" property="og:description" content="Building a Cyber Home Lab"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://www.dariocruz.dev/docs/HomeLab/Building The Home Lab"><link data-rh="true" rel="alternate" href="https://www.dariocruz.dev/docs/HomeLab/Building The Home Lab" hreflang="en"><link data-rh="true" rel="alternate" href="https://www.dariocruz.dev/docs/HomeLab/Building The Home Lab" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="DarioCruz.dev RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="DarioCruz.dev Atom Feed"><link rel="stylesheet" href="/assets/css/styles.d922e3b4.css">
<script src="/assets/js/runtime~main.49fa740e.js" defer="defer"></script>
<script src="/assets/js/main.4e688565.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/dcdev-logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/dcdev-logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">DarioCruz.dev</b></a><a class="navbar__item navbar__link" href="/blog">Blog</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Projects</a><a class="navbar__item navbar__link" href="/about">About</a></div><div class="navbar__items navbar__items--right"><a href="https://www.linkedin.com/in/dariocru/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Projects</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/HomeLab/Building The Home Lab">HomeLab</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/HomeLab/Building The Home Lab">Building The Home Lab</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">HomeLab</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Building The Home Lab</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Building The Home Lab</h1></header>
<p>Hello all,</p>
<p>While it&#x27;s been fun studying Cybersecurity concepts and tools, the time has come to put this knowledge to use with hands on projects. The goal of this lab is to have a space where I can create specific environments, providing hands-on experience with investigating threats, remediation, detection, etc.</p>
<p>So for this project I have gathered some hardware that I have purchased on eBay. A set of 3 Lenovo mini PC&#x27;s. Two M70q Gen 3&#x27;s and 1 model from a previous generation of this line of computers. I found a 3D printable 10&#x27; mini server rack and even a rack mount, specifically designed for the Lenovo mini desktops that I bought.</p>
<p>The plan is to install Proxmox on all 3 computers and create a Proxmox cluster so that all the nodes/computers can interface and communicate with one another via the virtual network that I will build out for the lab. I might even look at the HA (High Availability) functionality in Proxmox, which allows for failover and transfer of live VMs to the other nodes, if one of them were to go down for some reason.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="racking">Racking<a href="#racking" class="hash-link" aria-label="Direct link to Racking" title="Direct link to Racking">​</a></h2>
<p>Here are the computers all racked up nice and tidy. I even installed a small patch panel to keep the ethernet cabling in order. I plan on putting a gigabit unmanaged network switch in the top rack slot.</p>
<p><img decoding="async" loading="lazy" src="/assets/images/5743927c9d55dea7cbdeda8da0ae65ce-d5d7f249729976337f2759c832cadec5.png" width="647" height="862" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="zimaboard-firewall">Zimaboard Firewall<a href="#zimaboard-firewall" class="hash-link" aria-label="Direct link to Zimaboard Firewall" title="Direct link to Zimaboard Firewall">​</a></h2>
<p>Proxmox and other bare metal hypervisor software have the ability to carry out SDN Wan to manage a virtualized network for all logical hosts. While this a convenient implementation to have, I would like to achieve a more real world configuration via the use of the PFsense firewall OS, provided and maintained by NetGate. The hardware that I am using for the firewall is a 1st generation <a href="https://shop.zimaboard.com/" target="_blank" rel="noopener noreferrer">Zimaboard</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="installing-pfsense">Installing PFSense<a href="#installing-pfsense" class="hash-link" aria-label="Direct link to Installing PFSense" title="Direct link to Installing PFSense">​</a></h3>
<p>Installing PFSense was very straight forward, download the compressed image file, extract the image file, and image a USB flash drive via belina Etcher, or in this case, rufus. Hit F11 while the Zimaboard boots and select the flash drive as the intended boot device. Boot into the NetGate installer and configure your initial network settings. In my case, I have configured the router/firewall with these network settings:</p>
<ul>
<li><strong>Network</strong>: <code>10.1.1.1/24</code></li>
<li><strong>Range Start</strong>: <code>10.1.1.10</code></li>
<li><strong>Range End</strong>: <code>10.1.1.100</code></li>
<li><strong>WAN Interface</strong>: <code>RE0</code></li>
<li><strong>LAN Interface</strong>: <code>RE1</code></li>
</ul>
<p>For now I have not configured anything else on PFSense. No ACL&#x27;s or Firewall rules. The goal is to get everything up and running and communicating, and then while fleshing out projects I will enable different settings to simulate different types of network environments.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="tenda-switch">Tenda Switch<a href="#tenda-switch" class="hash-link" aria-label="Direct link to Tenda Switch" title="Direct link to Tenda Switch">​</a></h3>
<p>For switching and interconnecting of physical and logical hosts, we will be using a basic 5 port Tenda switch. The switch is unmanaged and not VLAN aware, which will suit or needs for the time being.</p>
<p>I opted to create a simple rack mount for the switch using OnShape, a web based CAD software that&#x27;s free for students and creators.
<img decoding="async" loading="lazy" alt="Tenda - Basic 5 Port Switch" src="/assets/images/tenda-switch-dcb1a0ee218c31e8353dfeebdeb090f6.jpg" width="894" height="371" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="proxmox-install">Proxmox Install<a href="#proxmox-install" class="hash-link" aria-label="Direct link to Proxmox Install" title="Direct link to Proxmox Install">​</a></h2>
<p><img decoding="async" loading="lazy" src="/assets/images/5629a04db95d04845337d0b233d9243f-271eae3d795f814cde2e379eac3bb4f3.png" width="943" height="453" class="img_ev3q">
I went ahead and installed Proxmox on all 3 computers, configuring them with hostnames and IP addressing via my routers DHCP server and also documenting the hostnames and IP addresses for later use. I also installed <a href="https://tailscale.com/" target="_blank" rel="noopener noreferrer">Tailscale</a> which is a VPN implementation that has a host of features that make it easy to connect to your home network via mesh VPN tunnels. It uses Wireguard under the hood to accomplish this, allowing me to access the lab from my personal computer, while I am on the guest WIFI network while I am at work. Below are all the node details, after network config and Tailscale install.</p>
<table><thead><tr><th>Hostname</th><th>IP Address</th><th>Tailnet Address</th></tr></thead><tbody><tr><td>lab01-pve.local</td><td>192.168.1.152</td><td>100.95.216.54</td></tr><tr><td>lab02-pve.local</td><td>192.168.1.42</td><td>100.64.68.17</td></tr><tr><td>lab03-pve.local</td><td>192.168.1.52</td><td>100.65.41.127</td></tr></tbody></table>
<p><img decoding="async" loading="lazy" src="/assets/images/8b425a19f800f16119a885e56a6c0d97-92886a4b1db72171c41d2952ed3060d4.png" width="1071" height="271" class="img_ev3q"></p>
<p>Great thing about Tailscale is the Magic DNS functionality which allows me to connect to the nodes via there hostname anywhere. So even if I am off-site, I can connect to tailscale and ssh or load the web interface of Proxmox via the hostname.</p>
<p><img decoding="async" loading="lazy" src="/assets/images/aee446c7cd8914aec6aca94545b87ce8-3afdbc60f27ca71775c9ffd1bcf396ac.png" width="659" height="478" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="proxmox-config--clustering">Proxmox Config &amp; Clustering<a href="#proxmox-config--clustering" class="hash-link" aria-label="Direct link to Proxmox Config &amp; Clustering" title="Direct link to Proxmox Config &amp; Clustering">​</a></h2>
<p>Now for the fun part, getting all of these nodes into a cluster. Looking at the Proxmox <a href="https://pve.proxmox.com/pve-docs/pve-admin-guide.html#chapter_pvecm" target="_blank" rel="noopener noreferrer">documentation</a> the only requirement is that the nodes be running Proxmox and have their final hostname &amp; IP address configurations. In the Proxmox GUI we need to navigate to <code>Datacenter&gt;Cluster</code>.</p>
<p><img decoding="async" loading="lazy" src="/assets/images/64a20bad6babb4785713d4ee1c65d349-e025749963a4010b932b93500818b920.png" width="1080" height="791" class="img_ev3q"></p>
<p>I gave the cluster super original name of <code>Sec-Lab-Cluster</code>😜, and proceeded on to the next step.</p>
<p><img decoding="async" loading="lazy" src="/assets/images/58a5f5a094c107c012ec9308ddfb46fc-ad5439ff6cb76f7a6a1ff51b35a99081.png" width="799" height="499" class="img_ev3q"></p>
<p>Okay so the cluster has been created. Not it&#x27;s time to add the other nodes to the Proxmox Cluster and get them talking to one another and sharing resources. For that, we need to login to each other the other two clusters and join them to the cluster established on <strong>Lab01-pve</strong> but, first there is some info that we need handy. We need to login to <strong>Lab01-pve</strong> and get the cluster info to add to the other nodes. So, to do this we go to <code>Datacenter&gt;Cluster&gt;Join Information</code>.</p>
<p><img decoding="async" loading="lazy" src="/assets/images/195f3e190385fd59007cef7e1ac2bee6-00e9c2019ab6b923b1f2c2b1c036ffe8.png" width="1077" height="758" class="img_ev3q"></p>
<p>Then on the joining node we go to <code>Datacater&gt;Cluster&gt;Join Cluster</code> and paste in the information. Pasting the info we copied from <strong>Lab01-pve</strong> brings up all the required info for joining the node, minus the root password. We input that and then join the node to the cluster. I did this again on the last and final node and here is the result:</p>
<p><img decoding="async" loading="lazy" src="/assets/images/53852baf5ef6b7bff47e744e1b37bae5-23bc04e47d097a346cd7d48fc2920246.png" width="1078" height="824" class="img_ev3q"></p>
<p>All 3 nodes in a single cluster. 😎</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="so-whats-next">So What&#x27;s Next?<a href="#so-whats-next" class="hash-link" aria-label="Direct link to So What&#x27;s Next?" title="Direct link to So What&#x27;s Next?">​</a></h2>
<p>That&#x27;s a good question. So my plan is to follow all the the domains of the Security+ and also the SC-300 from Microsoft, both of which are certifications that I currently hold. Applying the learning I have done to hands on projects. I am specifically excited to tackle a PKI project as the topic interested me while I was studying for the Security+ SY0-701.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/intro"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Projects</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#racking" class="table-of-contents__link toc-highlight">Racking</a></li><li><a href="#zimaboard-firewall" class="table-of-contents__link toc-highlight">Zimaboard Firewall</a><ul><li><a href="#installing-pfsense" class="table-of-contents__link toc-highlight">Installing PFSense</a></li><li><a href="#tenda-switch" class="table-of-contents__link toc-highlight">Tenda Switch</a></li></ul></li><li><a href="#proxmox-install" class="table-of-contents__link toc-highlight">Proxmox Install</a></li><li><a href="#proxmox-config--clustering" class="table-of-contents__link toc-highlight">Proxmox Config &amp; Clustering</a></li><li><a href="#so-whats-next" class="table-of-contents__link toc-highlight">So What&#39;s Next?</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 DarioCruz.dev. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>